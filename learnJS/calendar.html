<!doctype html>
<html lang="ja">
<head>
    <meta charset="utf-8" />
    <title>calendar</title>
	<link href="calendarstyle.css" rel="stylesheet">
    <script>
        window.onload = function() {
            //本日の日付を取得
            var date = new Date();
            var year = date.getUTCFullYear();
            var month = date.getMonth() - 1;
            var today = date.getDate();

            //当月１日の日付を取得
            var firstDate = new Date(year, month - 1, 1);

            //当月末日の日付を取得
            var lastDate = new Date(year, month, 0);


            //当年月を表示
            var table_title = year + "年" + month + "月";
            var captionHtml = "<caption>" + table_title + "</caption>";


            //曜日行表示
            //var weekdays = ["日","月","火","水","木","金","土"];
            var weekdaysStr = "<tr>";
            weekdaysStr += "<td class = 'sun'>日</td>";
            weekdaysStr += "<td>月</td>";
            weekdaysStr += "<td>火</td>";
            weekdaysStr += "<td>水</td>";
            weekdaysStr += "<td>木</td>";
            weekdaysStr += "<td>金</td>";
            weekdaysStr += "<td class = 'sat'>土</td>";
            weekdaysStr += "</tr>";


            //日付行表示
            var htmlStr = "<tr>";
            //当月１日の曜日取得
            var startWeekDay = firstDate.getDay();
            //１日までを空白で埋める
            for(var i = 0; i < startWeekDay; i++) {
               htmlStr += "<td>&nbsp;</td>"; 
            }
            //１日から月末日までループ
            for(var i = 1; i <= lastDate.getDate(); i++) {
                //当月i日のDateオブジェクト生成
                var date = new Date(year, month - 1, i);
                //i日の曜日を取得
                var weekDay = date.getDay();
                cellStr = "<u>" + i + "</u>";

                //日曜日の場合は行の開始なのでtrタグ
                if(weekDay == 0) {
                    htmlStr += "<tr>";
                    htmlStr += "<td class='sun'>";
                }else if(weekDay == 6) {
                    htmlStr += "<td class='sat'>";
                }else {
                    htmlStr += "<td>";
                }

                htmlStr += cellStr + "</td>";

                if(weekDay == 6) {
                    htmlStr += "</tr>\n";
                }
            }
            
            //月末の空白埋め
            var lastDayWeek = lastDate.getDay();
            if(lastDayWeek != 6) {
                for(var i=lastDayWeek; i < 6; i++) {
                    htmlStr += "<td>&nbsp;</td>";
                }
                htmlStr += "<tr>";
            }

            //書き出し
            document.getElementById("calendar").innerHTML =
                "<table>" + captionHtml + weekdaysStr + htmlStr + "</table>";

        }
    </script>
<head>
    <div id="calendar" class="calendar"></div>
</html>